patterns:
  "player":
    - shot_velocity: [3000, -90, set]
    - endless:
      - if:
          command: fire
          then:
            - shot_position: [50, 0, set]
            - fire:
            - shot_position: [50, 180, set]
            - fire:
            - wait: 3
  "enemy1":
    - shot_velocity: [400, 90, set, polar, absolute]
    - parallel:
      - endless:
        - sequence:
          - fire:
          - wait: 60
      - sequence:
        - wait: 240
        - if:
            expression: 1 == 1
            then:
              - velocity: [100, -90]
            else:
              - velocity: [900, 90]
        - endless:
          - velocity: [7, 90, add]
  "enemy2":
    - velocity: [500, 90]

definitions:
  "accelerate":
    arguments: [spd, dir]
    pattern:
      - endless:
        - addvelocity: [spd, dir]
